const module_name="quiz";let score=0,totalAnswers=0,chosenSet=[],answers=[],slides=[],currentSlide=0;const previousButton=document.getElementById("previous"),nextButton=document.getElementById("next");let scoreObj=new Score("quiz");scoreObj.initScore();let dataService=new DataService;const questions=[{question:"Select the Japanese translation for the English sentence: Good morning. ",answers:{a:"Ohayō gozaimasu",b:"Gomennasai",c:"O-yasumi nasai"},correctAnswer:"a"},{question:"Japanese culture: What is ikebana?",answers:{a:"A traditional dish.",b:"Art of flower arrangement.",c:"A building."},correctAnswer:"b"},{question:"Select the English translation for each Japanese sentence: Nante iimashita ka.",answers:{a:"I don't know what to say.",b:"What did you say?",c:"Did you say something?"},correctAnswer:"b"},{question:"Pick the Japanese word that matches the English word: Watashi wa nihongo ga [a little] shika hanasemasen.",answers:{a:"sukoshi",b:"motto",c:"yoku"},correctAnswer:"a"},{question:"Japanese culture: While having dinner at a restaurant with your Japanese friends your nose starts to run.",answers:{a:"Blow your nose on a tissue and throw it away.",b:"Sniff repeatedly.",c:"Excuse yourself, turn your head over your shoulder, blow your nose on a tissue and put it in your pocket."},correctAnswer:"b"},{question:"Japanese culture: Many decisions/choices are made in Japan by",answers:{a:"Tossing a coin.",b:"Women get first choice.",c:"Rock, paper, scissors. "},correctAnswer:"c"},{question:"Check the numeral that matches the Japanese word: sanjū",answers:{a:"300",b:"30",c:"3"},correctAnswer:"b"},{question:"Christmas in Japan...",answers:{a:"Although most Japanese people are not Christians it is customary to go to church on Christmas eve.",b:"Is mostly celebrated by sweethearts going on romantic dates. ",c:"Is not well known as there are few Christians in Japan. "},correctAnswer:"b"}];function buildQuiz(){chosenSet=[],nextQuizButton.style.display="none",chosenSet.push(questions[Math.floor(Math.random()*questions.length)]),chosenSet.push(questions[Math.floor(Math.random()*questions.length)]);const e=dataService.getRandomWord();let t;dataService.translateText(e,s=>{let n;n={question:"Choose the right translation for: "+(t=s),answers:{a:dataService.getRandomWord(),b:dataService.getRandomWord(),c:e},correctAnswer:"c"},chosenSet.push(n);const o=[];chosenSet.forEach((e,t)=>{answers=[];for(let s in e.answers)answers.push(`<label>\n                 <input type="radio" name="question${t}" value="${s}">\n                  ${s} :\n                  ${e.answers[s]}\n               </label>`);o.push(`<div class="slide">\n               <div class="question"> ${e.question} </div>\n               <div class="answers"> ${answers.join("")} </div>\n             </div>`)}),quizContainer.innerHTML=o.join(""),score=0,currentSlide=0,slides=document.querySelectorAll(".slide"),showSlide(0),resultsContainer.innerHTML=" ",submitButton.addEventListener("click",showResults),previousButton.addEventListener("click",showPreviousSlide),nextButton.addEventListener("click",showNextSlide),nextQuizButton.addEventListener("click",buildQuiz)})}function showResults(){const e=quizContainer.querySelectorAll(".answers");let t=0;chosenSet.forEach((s,n)=>{const o=`input[name=question${n}]:checked`,a=(e[n].querySelector(o)||{}).value;totalAnswers++,a===s.correctAnswer?(t++,score++,e[n].style.color="lightgreen"):e[n].style.color="red"}),submitButton.style.display="none",nextQuizButton.style.display="inline-block",scoreObj.updateScore(score),resultsContainer.innerHTML=` You have answered ${t} out of ${chosenSet.length} questions correctly. You've earned ${score} points. `}function showSlide(e){slides[currentSlide].classList.remove("active-slide"),slides[e].classList.add("active-slide"),currentSlide=e,previousButton.style.display=0===currentSlide?"none":"inline-block",currentSlide===slides.length-1?(nextButton.style.display="none",submitButton.style.display="inline-block"):(nextButton.style.display="inline-block",submitButton.style.display="none")}function showNextSlide(){showSlide(currentSlide+1)}function showPreviousSlide(){showSlide(currentSlide-1)}