class Score{constructor(t){if(Date.prototype.toComparingString=function(){return this.getUTCMonth()+1+"."+this.getUTCDate()+"."+this.getUTCFullYear()},localStorage.getItem("dayArray")){let t=JSON.parse(localStorage.getItem("dayArray"));t.indexOf((new Date).toComparingString())<0&&t.push((new Date).toComparingString()),localStorage.setItem("dayArray",JSON.stringify(t))}else localStorage.setItem("dayArray",JSON.stringify([(new Date).toComparingString()]));this.moduleName=t,this.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.blankHistory={streak:0,todayScore:0,maxStreak:0,monday:0,tuesday:0,wednesday:0,thursday:0,friday:0,saturday:0,sunday:0,lastLogin:Date.now()};let a=new Date;this.fakeHistory={streak:Math.trunc(10*Math.random()),todayScore:Math.trunc(10*Math.random()),maxStreak:Math.trunc(10*Math.random()),monday:Math.trunc(10*Math.random()),tuesday:Math.trunc(10*Math.random()),wednesday:Math.trunc(10*Math.random()),thursday:Math.trunc(10*Math.random()),friday:Math.trunc(10*Math.random()),saturday:Math.trunc(10*Math.random()),sunday:Math.trunc(10*Math.random()),lastLogin:a.setDate(a.getDate())},this.updateHistory()}updateHistory(){let t=new Date,a=this.getHistory();if(a){let e=new Date(a.lastLogin);t.toComparingString()!==e.toComparingString()&&(a.todayScore=0,a.lastLogin=t.setDate(t.getDate())),this.setHistory(a)}else this.initScore()}initScore(){localStorage.getItem(this.moduleName)||this.setHistory(this.blankHistory)}initFakeScore(){this.setHistory(this.fakeHistory)}getHistory(){return JSON.parse(localStorage.getItem(this.moduleName))}setHistory(t){localStorage.setItem(this.moduleName,JSON.stringify(t))}updateScore(t){let a=this.getHistory();a.todayScore+=t;let e=new Date,r=new Date(a.lastLogin),o=new Date;o.setDate(r.getDate()+1),o.toComparingString()===e.toComparingString()?a.streak++:a.streak=1,a.streak>a.maxStreak&&(a.maxStreak=a.streak),a[this.days[e.getDay()].toLowerCase()]+=t,this.setHistory(a)}}