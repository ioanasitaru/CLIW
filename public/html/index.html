<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ASLE</title>
    <link href="../css/score.css" rel="stylesheet">
    <link href="../css/about.css" rel="stylesheet">
    <link href="../css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="../js/ModuleLoader.js"></script>
    <script src="../comp.json"></script>
    <script>mLoader = new ModuleLoader("changeable_content");</script>
</head>
<body class="landing">
<div id="page-wrapper">
    <div id="header">
        <a href="#" id="logo-link">
            <img src="../img/logo.png" id="logo" alt="asle-logo">
        </a>
        <div class="vertical-line"></div>
        <nav id="nav">
            <ul>
                <li><a href="about.html">Home</a></li>
                <li>
                    <a href="index.html">Practice</a>
                </li>
                <li><a href="score.html">Progress</a></li>
            </ul>
        </nav>
    </div>
    <div id="main" class="wrapper">
        <div class="container">
            <header class="min-major">
                <div>
                    <h2 class="title">Learning modules</h2>
                    <h4 class="subtitle">Practice makes perfect</h4></div>
            </header>
            <section id="content">
                <div id="left-side">
                    <content id="changeable_content">
                    </content>
                </div>
                <div id="right-side">
                    <div id="progress-image"><img src="../img/progress_max.png" alt="max-progress"></div>
                    <div id="side-bar-buttons">
                        <hr>
                        <section id="references">
                            <h3> Useful references </h3>
                            <div id="links">
                                <a href="http://www.openculture.com/freelanguagelessons"> Courses online</a>
                                <a href="https://en.wikipedia.org/wiki/Japanese_language"> Wiki Japanese</a>
                            </div>
                        </section>
                        <br>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>
<script>
    String.prototype.capitalize = function () {
        return this.charAt(0).toUpperCase() + this.slice(1);
    }

    let moduleMenu = document.getElementById("side-bar-buttons");
    let references = document.getElementById("references");

    fetch("../comp.json")
        .then(response => response.json())
        .then(components => {
            components.forEach((component) => {
                let newSection = document.createElement("section");
                let title = document.createElement("h3");
                let description = document.createElement("p");
                let button = document.createElement("button");
                let after = document.createElement("hr");

                title.innerText = component.name.capitalize();
                description.innerText = component.description;
                button.addEventListener("click", function () {
                    mLoader.changeContent(component.name, component.src);
                }, false);
                button.innerText = component.button;

                newSection.appendChild(title);
                newSection.appendChild(description);
                newSection.appendChild(button);

                moduleMenu.insertBefore(newSection, references);
                moduleMenu.insertBefore(after, references);
            });
        });
</script>
</body>
</html>